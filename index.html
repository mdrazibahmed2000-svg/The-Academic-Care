<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic Care Fee Management</title>
    <!-- Load custom stylesheet -->
    <link rel="stylesheet" href="style.css">
    
    <!-- CRITICAL: FIREBASE SDK LINKS -->
    <!-- These MUST be loaded before script.js -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>

    <div class="page">
        <!-- Login / Registration Page -->
        <div id="login-page">
            <h2>Login / Student ID</h2>
            <input type="text" id="studentId" placeholder="Enter Student ID or 'admin'">
            <button onclick="login()">Login</button>
            <p id="loginError" class="error"></p>
            <button onclick="showRegister()">New Student? Register Here</button>
        </div>

        <!-- Registration Page (Hidden by default) -->
        <div id="register-page" class="hidden">
            <h2>New Student Registration</h2>
            <form id="registerForm">
                <input type="text" id="regName" placeholder="Student Name" required>
                <input type="number" id="regClass" placeholder="Class (e.g., 7)" required>
                <input type="number" id="regRoll" placeholder="Roll (e.g., 1)" required>
                <input type="text" id="regGuardian" placeholder="Guardian Phone Number" required>
                <button type="button" onclick="registerStudent()">Register</button>
                <button type="button" onclick="showLogin()">Back to Login</button>
            </form>
        </div>

        <!-- Student Dashboard (Hidden by default) -->
        <div id="dashboard" class="hidden">
            <!-- Student Header (Populated by JS) -->
            <div id="studentName">
                <h2>The Academic Care</h2>
                <p>Academic Year: 2025</p>
            </div>
            
            <!-- My Profile Section -->
            <h3 id="profileHeader" class="collapsible-header profile-header" onclick="toggleSection('profileContent')">
                My Profile ⬇️
            </h3>
            <div id="profileContent" class="collapsible-content hidden">
                <!-- Profile details populated by JS -->
            </div>

            <!-- Tuition Fee Status Section -->
            <h3 id="feesHeader" class="collapsible-header fees-header" onclick="toggleSection('feesContent')">
                Tuition Fee Status ⬇️
            </h3>
            <div id="feesContent" class="collapsible-content hidden">
                <!-- Fee list populated by JS -->
            </div>
            
            <button onclick="logout()">Logout</button>
        </div>
        
        <!-- Admin Panel (Hidden by default) -->
        <div id="admin-panel" class="hidden">
            <h2>Admin Panel</h2>
            <h3 class="collapsible-header" onclick="toggleSection('pendingStudentsContent')">
                Pending Registrations ⬇️
            </h3>
            <div id="pendingStudentsContent" class="collapsible-content">
                <ul id="pendingStudents">
                    <!-- List of pending students populated by JS -->
                    <li>Loading...</li>
                </ul>
            </div>

            <h3 class="collapsible-header" onclick="toggleSection('manageFeesContent')">
                Manage Monthly Fees ⬇️
            </h3>
            <div id="manageFeesContent" class="collapsible-content">
                <select id="selectStudentFees" onchange="loadStudentFees(this.value)">
                    <option value="">Select Student</option>
                </select>
                <div id="monthlyFees">
                    <!-- Monthly fee management populated by JS -->
                </div>
            </div>
            
            <button onclick="logout()">Logout</button>
        </div>
    </div>

    <!-- Load the main application script -->
    <script src="script.js"></script>
</body>
</html>
